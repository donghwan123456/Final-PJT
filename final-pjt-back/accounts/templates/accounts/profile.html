<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
  <style>
    .edit-button, .save-button, .cancel-button {
        margin-left: 10px;
    }
    .save-button, .cancel-button {
        display: none;
    }
</style>
<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
</head>
<body>
  <h1>{{ person.username }}님의 프로필 페이지</h1>

  {% comment %}  {% endcomment %}
  <form method="post">
    {% csrf_token %}
    <div class="form-group" id="username-group">
        <label for="{{ form.username.id_for_label }}">{{ form.username.label }}</label>
        {{ person.username }}
        <button type="button" class="edit-button" data-field="username">수정하기</button>
        <button type="submit" class="save-button">저장</button>
        <button type="button" class="cancel-button" data-field="username">취소</button>
    </div>
    <div class="form-group" id="address-group">
        <label for="{{ form.address.id_for_label }}">{{ form.address.label }}</label>
        {{ person.address }}
        <button type="button" class="edit-button" data-field="address">수정하기</button>
        <button type="submit" class="save-button">저장</button>
        <button type="button" class="cancel-button" data-field="address">취소</button>
    </div>
    <div class="form-group" id="birthday-group">
        <label for="{{ form.birthday.id_for_label }}">{{ form.birthday.label }}</label>
        {{ person.birthday }}
        <button type="button" class="edit-button" data-field="birthday">수정하기</button>
        <button type="submit" class="save-button">저장</button>
        <button type="button" class="cancel-button" data-field="birthday">취소</button>
    </div>
    <div class="form-group" id="assets-group">
        <label for="{{ form.assets.id_for_label }}">{{ form.assets.label }}</label>
        {{ person.assets }}
        <button type="button" class="edit-button" data-field="assets">수정하기</button>
        <button type="submit" class="save-button">저장</button>
        <button type="button" class="cancel-button" data-field="assets">취소</button>
    </div>
    <div class="form-group" id="goal-group">
        <label for="{{ form.Goal.id_for_label }}">{{ form.Goal.label }}</label>
        {{ person.Goal }}
        <button type="button" class="edit-button" data-field="Goal">수정하기</button>
        <button type="submit" class="save-button">저장</button>
        <button type="button" class="cancel-button" data-field="Goal">취소</button>
    </div>
</form>


  <div>
    
    <p>이름: {{person.username}}</p>
    <p>주소: {{person.address}}</p>
    <p>생일: {{person.birthday}}</p>
    <p>보유자산: {{person.assets}}원</p>
    <p>목표금액: {{person.Goal}}원</p>
  </div>
  <div>
    <a href="{% url 'accounts:update' %}">회원정보 수정하기</a>
  </div>
  
  <div>
    <a href="{% url 'articles:index' %}">되돌아가기</a>
  </div>

  <script>
    $(document).ready(function() {
        $('.edit-button').click(function() {
            var field = $(this).data('field');
            $('#id_' + field).prop('readonly', false).focus(); // 입력 가능하도록 설정하고 포커스를 줍니다.
            $('#' + field + '-group .save-button').show();
            $('#' + field + '-group .cancel-button').show();
            $(this).hide();
        });

        $('.cancel-button').click(function() {
            var field = $(this).data('field');
            $('#id_' + field).prop('readonly', true);
            $('#' + field + '-group .edit-button').show();
            $('#' + field + '-group .save-button').hide();
            $(this).hide();
        });

        // 폼 로드 시 모든 입력 필드를 읽기 전용으로 설정합니다.
        $('input').prop('readonly', true);
    });
</script>
</body>
</html>